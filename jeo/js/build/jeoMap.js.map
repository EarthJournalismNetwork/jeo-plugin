{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/lodash._reinterpolate/index.js","webpack:///./node_modules/lodash.template/index.js","webpack:///./node_modules/lodash.templatesettings/index.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/js/src/jeo-map/index.js"],"names":["decodeHtmlEntity","str","replace","match","dec","String","fromCharCode","JeoMap","element","args","attributes","markers","layers","legends","map","window","mapboxgl","Map","container","attributionControl","options","jQuery","data","moreInfoTemplate","template","jeoMapVars","templates","moreInfo","popupTemplate","postPopup","initMap","then","getArg","length","setZoom","setCenter","addControl","NavigationControl","showCompass","scrollZoom","disable","dragPan","touchZoomRotate","dragRotate","FullscreenControl","setMaxBounds","setMinZoom","setMaxZoom","addMapWithoutLayersMessage","amountLayers","getLayers","baseLayer","addStyle","customAttribution","on","forEach","layer","i","attribution","attributionLink","attributionName","attribution_name","regex","RegExp","includes","attributionLabel","push","addLayer","addInteractions","addLayersControl","AttributionControl","addMoreButtonAndLegends","getRelatedPosts","remove","ajax","type","beforeSend","request","setRequestHeader","nonce","url","jsonUrl","map_post_object","Promise","resolve","document","createElement","innerHTML","appendChild","addClass","find","classList","add","hideableContent","appearingLegends","legend","use_legend","legendsTitle","legendsHideIcon","addEventListener","contains","slideToggle","legendsWrapper","legendContainer","layer_id","render","moreDiv","layer_name","sourceLink","source_url","closeButton","click","e","onclick","preventDefault","stopPropagation","currentTarget","parent","hide","moreButton","siblings","show","l","visible","argName","value","meta","reject","layersDefinitions","layersIds","el","id","urlRoutes","location","pathname","split","lang","get","include","orderby","returnLayers","returnLegends","ordered","index","layerObject","JeoLayer","slug","title","rendered","default","layer_type_options","legend_type","show_legend","JeoLegend","legend_type_options","relatedPostsCriteria","query","per_page","order","keys","Object","_embed","post","addPostToMap","_related_point","point","addPointToMap","color","relevance","marker","Marker","getElement","popupHTML","read_more","string_read_more","show_featured_media","popUp","Popup","setHTML","LngLat","lat","parseFloat","_geocode_lat","lon","_geocode_lon","setLngLat","addTo","activateMarker","marker_action","setPopup","embedPreviewActive","updateEmbedPreview","flyTo","center","zoom","activeMarker","canToggle","_lngLat","toggle","html","use","switchableLayers","getSwitchableLayers","swappableLayers","getSwappableLayers","navElement","layerSelectionTitle","legendTextIcon","layerIcon","link","href","className","layerName","textContent","setAttribute","clicked","clickedLayer","dataset","visibility","getLayoutProperty","hideLayer","showLayer","getDefaultSwappableLayer","hasClass","children","removeClass","getStyle","setLayoutProperty","changeLayerVisibitly","$","each","map_id","cls","indexOf","substr"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACNA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mBAAO,CAAC,4EAAuB;AACnD,uBAAuB,mBAAO,CAAC,gFAAyB;;AAExD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC;AACzC;AACA,yDAAyD;;AAEzD;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA,wBAAwB,MAAM,aAAa,OAAO;;AAElD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,KAA0B;;AAE5C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,MAAM;AACjB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,WAAW,OAAO,WAAW;AAC7B,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA,wBAAwB;;AAExB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,iBAAiB;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA,6BAA6B,kBAAkB,EAAE;AACjD;AACA;AACA;AACA;AACA;AACA,8CAA8C,kBAAkB,EAAE;AAClE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS,GAAG,SAAS,GAAG,SAAS;AAC9C,UAAU;AACV;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,YAAY;AAC9B,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA,YAAY,OAAO;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA,aAAa,sBAAsB;AACnC,iBAAiB,UAAU;AAC3B;AACA;AACA,kEAAkE,2BAA2B,EAAE;AAC/F,aAAa,8BAA8B;AAC3C;AACA;AACA;AACA,wDAAwD;AACxD,aAAa,mBAAmB;AAChC;AACA;AACA;AACA;AACA,sCAAsC,OAAO;AAC7C,aAAa,oBAAoB;AACjC;AACA;AACA;AACA;AACA,aAAa,qBAAqB;AAClC;AACA;AACA;AACA,iDAAiD,2BAA2B,EAAE;AAC9E,oCAAoC,aAAa,eAAe,EAAE;AAClE,aAAa,8BAA8B;AAC3C;AACA;AACA;AACA,oDAAoD,qCAAqC;AACzF;AACA;AACA;AACA;AACA,sDAAsD,qBAAqB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,YAAY;AACnD,sCAAsC,QAAQ;AAC9C,aAAa,qBAAqB;AAClC;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B;;AAE3B,+BAA+B;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,wBAAwB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,mBAAmB;AAC7C;AACA;AACA;AACA;AACA,wCAAwC;;AAExC;AACA,mDAAmD;AACnD;AACA;AACA,yBAAyB,EAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC,2BAA2B,iCAAiC;AAC5D,UAAU;AACV;AACA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,KAAK;AAChB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,SAAS;AACtB;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA,WAAW,SAAS,GAAG,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,EAAE;AACf;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACtnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mBAAO,CAAC,4EAAuB;;AAEnD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb,YAAY;AACZ,YAAY;AACZ,cAAc;AACd,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;AC7XA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA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","file":"jeoMap.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./src/js/build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/src/jeo-map/index.js\");\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","/**\n * lodash 3.0.0 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.7.0 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used to match template delimiters. */\nvar reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\nmodule.exports = reInterpolate;\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\nvar reInterpolate = require('lodash._reinterpolate'),\n    templateSettings = require('lodash.templatesettings');\n\n/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    domExcTag = '[object DOMException]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to match empty string literals in compiled template source. */\nvar reEmptyStringLeading = /\\b__p \\+= '';/g,\n    reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n    reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/**\n * Used to match\n * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n */\nvar reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to ensure capturing order of template delimiters. */\nvar reNoMatch = /($^)/;\n\n/** Used to match unescaped characters in compiled string literals. */\nvar reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Used to escape characters for inclusion in compiled string literals. */\nvar stringEscapes = {\n  '\\\\': '\\\\',\n  \"'\": \"'\",\n  '\\n': 'n',\n  '\\r': 'r',\n  '\\u2028': 'u2028',\n  '\\u2029': 'u2029'\n};\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\n/**\n * Used by `_.template` to escape characters for inclusion in compiled string literals.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\nfunction escapeStringChar(chr) {\n  return '\\\\' + stringEscapes[chr];\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object),\n    nativeMax = Math.max,\n    nativeNow = Date.now;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n * of source objects to the destination object for all destination properties\n * that resolve to `undefined`.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to assign.\n * @param {Object} object The parent object of `objValue`.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsAssignIn(objValue, srcValue, key, object) {\n  if (objValue === undefined ||\n      (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n    return srcValue;\n  }\n  return objValue;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n * `SyntaxError`, `TypeError`, or `URIError` object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n * @example\n *\n * _.isError(new Error);\n * // => true\n *\n * _.isError(Error);\n * // => false\n */\nfunction isError(value) {\n  if (!isObjectLike(value)) {\n    return false;\n  }\n  var tag = baseGetTag(value);\n  return tag == errorTag || tag == domExcTag ||\n    (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * This method is like `_.assignIn` except that it accepts `customizer`\n * which is invoked to produce the assigned values. If `customizer` returns\n * `undefined`, assignment is handled by the method instead. The `customizer`\n * is invoked with five arguments: (objValue, srcValue, key, object, source).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @alias extendWith\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} [customizer] The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @see _.assignWith\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   return _.isUndefined(objValue) ? srcValue : objValue;\n * }\n *\n * var defaults = _.partialRight(_.assignInWith, customizer);\n *\n * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n  copyObject(source, keysIn(source), object, customizer);\n});\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * Creates a compiled template function that can interpolate data properties\n * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n * properties may be accessed as free variables in the template. If a setting\n * object is given, it takes precedence over `_.templateSettings` values.\n *\n * **Note:** In the development build `_.template` utilizes\n * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n * for easier debugging.\n *\n * For more information on precompiling templates see\n * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n *\n * For more information on Chrome extension sandboxes see\n * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The template string.\n * @param {Object} [options={}] The options object.\n * @param {RegExp} [options.escape=_.templateSettings.escape]\n *  The HTML \"escape\" delimiter.\n * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n *  The \"evaluate\" delimiter.\n * @param {Object} [options.imports=_.templateSettings.imports]\n *  An object to import into the template as free variables.\n * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n *  The \"interpolate\" delimiter.\n * @param {string} [options.sourceURL='templateSources[n]']\n *  The sourceURL of the compiled template.\n * @param {string} [options.variable='obj']\n *  The data object variable name.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Function} Returns the compiled template function.\n * @example\n *\n * // Use the \"interpolate\" delimiter to create a compiled template.\n * var compiled = _.template('hello <%= user %>!');\n * compiled({ 'user': 'fred' });\n * // => 'hello fred!'\n *\n * // Use the HTML \"escape\" delimiter to escape data property values.\n * var compiled = _.template('<b><%- value %></b>');\n * compiled({ 'value': '<script>' });\n * // => '<b>&lt;script&gt;</b>'\n *\n * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n * compiled({ 'users': ['fred', 'barney'] });\n * // => '<li>fred</li><li>barney</li>'\n *\n * // Use the internal `print` function in \"evaluate\" delimiters.\n * var compiled = _.template('<% print(\"hello \" + user); %>!');\n * compiled({ 'user': 'barney' });\n * // => 'hello barney!'\n *\n * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n * // Disable support by replacing the \"interpolate\" delimiter.\n * var compiled = _.template('hello ${ user }!');\n * compiled({ 'user': 'pebbles' });\n * // => 'hello pebbles!'\n *\n * // Use backslashes to treat delimiters as plain text.\n * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n * compiled({ 'value': 'ignored' });\n * // => '<%- value %>'\n *\n * // Use the `imports` option to import `jQuery` as `jq`.\n * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n * compiled({ 'users': ['fred', 'barney'] });\n * // => '<li>fred</li><li>barney</li>'\n *\n * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n * compiled(data);\n * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n *\n * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n * compiled.source;\n * // => function(data) {\n * //   var __t, __p = '';\n * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n * //   return __p;\n * // }\n *\n * // Use custom template delimiters.\n * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n * var compiled = _.template('hello {{ user }}!');\n * compiled({ 'user': 'mustache' });\n * // => 'hello mustache!'\n *\n * // Use the `source` property to inline compiled templates for meaningful\n * // line numbers in error messages and stack traces.\n * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n *   var JST = {\\\n *     \"main\": ' + _.template(mainText).source + '\\\n *   };\\\n * ');\n */\nfunction template(string, options, guard) {\n  // Based on John Resig's `tmpl` implementation\n  // (http://ejohn.org/blog/javascript-micro-templating/)\n  // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n  var settings = templateSettings.imports._.templateSettings || templateSettings;\n\n  if (guard && isIterateeCall(string, options, guard)) {\n    options = undefined;\n  }\n  string = toString(string);\n  options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n  var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n      importsKeys = keys(imports),\n      importsValues = baseValues(imports, importsKeys);\n\n  var isEscaping,\n      isEvaluating,\n      index = 0,\n      interpolate = options.interpolate || reNoMatch,\n      source = \"__p += '\";\n\n  // Compile the regexp to match each delimiter.\n  var reDelimiters = RegExp(\n    (options.escape || reNoMatch).source + '|' +\n    interpolate.source + '|' +\n    (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n    (options.evaluate || reNoMatch).source + '|$'\n  , 'g');\n\n  // Use a sourceURL for easier debugging.\n  // The sourceURL gets injected into the source that's eval-ed, so be careful\n  // with lookup (in case of e.g. prototype pollution), and strip newlines if any.\n  // A newline wouldn't be a valid sourceURL anyway, and it'd enable code injection.\n  var sourceURL = hasOwnProperty.call(options, 'sourceURL')\n    ? ('//# sourceURL=' +\n       (options.sourceURL + '').replace(/[\\r\\n]/g, ' ') +\n       '\\n')\n    : '';\n\n  string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n    interpolateValue || (interpolateValue = esTemplateValue);\n\n    // Escape characters that can't be included in string literals.\n    source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n    // Replace delimiters with snippets.\n    if (escapeValue) {\n      isEscaping = true;\n      source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n    }\n    if (evaluateValue) {\n      isEvaluating = true;\n      source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n    }\n    if (interpolateValue) {\n      source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n    }\n    index = offset + match.length;\n\n    // The JS engine embedded in Adobe products needs `match` returned in\n    // order to produce the correct `offset` value.\n    return match;\n  });\n\n  source += \"';\\n\";\n\n  // If `variable` is not specified wrap a with-statement around the generated\n  // code to add the data object to the top of the scope chain.\n  // Like with sourceURL, we take care to not check the option's prototype,\n  // as this configuration is a code injection vector.\n  var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n  if (!variable) {\n    source = 'with (obj) {\\n' + source + '\\n}\\n';\n  }\n  // Cleanup code by stripping empty strings.\n  source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n    .replace(reEmptyStringMiddle, '$1')\n    .replace(reEmptyStringTrailing, '$1;');\n\n  // Frame code as the function body.\n  source = 'function(' + (variable || 'obj') + ') {\\n' +\n    (variable\n      ? ''\n      : 'obj || (obj = {});\\n'\n    ) +\n    \"var __t, __p = ''\" +\n    (isEscaping\n       ? ', __e = _.escape'\n       : ''\n    ) +\n    (isEvaluating\n      ? ', __j = Array.prototype.join;\\n' +\n        \"function print() { __p += __j.call(arguments, '') }\\n\"\n      : ';\\n'\n    ) +\n    source +\n    'return __p\\n}';\n\n  var result = attempt(function() {\n    return Function(importsKeys, sourceURL + 'return ' + source)\n      .apply(undefined, importsValues);\n  });\n\n  // Provide the compiled function's source by its `toString` method or\n  // the `source` property as a convenience for inlining compiled templates.\n  result.source = source;\n  if (isError(result)) {\n    throw result;\n  }\n  return result;\n}\n\n/**\n * Attempts to invoke `func`, returning either the result or the caught error\n * object. Any additional arguments are provided to `func` when it's invoked.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Util\n * @param {Function} func The function to attempt.\n * @param {...*} [args] The arguments to invoke `func` with.\n * @returns {*} Returns the `func` result or error object.\n * @example\n *\n * // Avoid throwing errors for invalid selectors.\n * var elements = _.attempt(function(selector) {\n *   return document.querySelectorAll(selector);\n * }, '>_>');\n *\n * if (_.isError(elements)) {\n *   elements = [];\n * }\n */\nvar attempt = baseRest(function(func, args) {\n  try {\n    return apply(func, undefined, args);\n  } catch (e) {\n    return isError(e) ? e : new Error(e);\n  }\n});\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = template;\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\nvar reInterpolate = require('lodash._reinterpolate');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]';\n\n/** Used to match HTML entities and HTML characters. */\nvar reUnescapedHtml = /[&<>\"']/g,\n    reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n/** Used to match template delimiters. */\nvar reEscape = /<%-([\\s\\S]+?)%>/g,\n    reEvaluate = /<%([\\s\\S]+?)%>/g;\n\n/** Used to map characters to HTML entities. */\nvar htmlEscapes = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Used by `_.escape` to convert characters to HTML entities.\n *\n * @private\n * @param {string} chr The matched character to escape.\n * @returns {string} Returns the escaped character.\n */\nvar escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * By default, the template delimiters used by lodash are like those in\n * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n * following template settings to use alternative delimiters.\n *\n * @static\n * @memberOf _\n * @type {Object}\n */\nvar templateSettings = {\n\n  /**\n   * Used to detect `data` property values to be HTML-escaped.\n   *\n   * @memberOf _.templateSettings\n   * @type {RegExp}\n   */\n  'escape': reEscape,\n\n  /**\n   * Used to detect code to be evaluated.\n   *\n   * @memberOf _.templateSettings\n   * @type {RegExp}\n   */\n  'evaluate': reEvaluate,\n\n  /**\n   * Used to detect `data` property values to inject.\n   *\n   * @memberOf _.templateSettings\n   * @type {RegExp}\n   */\n  'interpolate': reInterpolate,\n\n  /**\n   * Used to reference the data object in the template text.\n   *\n   * @memberOf _.templateSettings\n   * @type {string}\n   */\n  'variable': '',\n\n  /**\n   * Used to import variables into the compiled template.\n   *\n   * @memberOf _.templateSettings\n   * @type {Object}\n   */\n  'imports': {\n\n    /**\n     * A reference to the `lodash` function.\n     *\n     * @memberOf _.templateSettings.imports\n     * @type {Function}\n     */\n    '_': { 'escape': escape }\n  }\n};\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n * corresponding HTML entities.\n *\n * **Note:** No other characters are escaped. To escape additional\n * characters use a third-party library like [_he_](https://mths.be/he).\n *\n * Though the \">\" character is escaped for symmetry, characters like\n * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n * unless they're part of a tag or unquoted attribute value. See\n * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n * (under \"semi-related fun fact\") for more details.\n *\n * When working with HTML you should always\n * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n * XSS vectors.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escape('fred, barney, & pebbles');\n * // => 'fred, barney, &amp; pebbles'\n */\nfunction escape(string) {\n  string = toString(string);\n  return (string && reHasUnescapedHtml.test(string))\n    ? string.replace(reUnescapedHtml, escapeHtmlChar)\n    : string;\n}\n\nmodule.exports = templateSettings;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import template from 'lodash.template';\n\nconst decodeHtmlEntity = function ( str ) {\n\treturn str.replace( /&#(\\d+);/g, function ( match, dec ) {\n\t\treturn String.fromCharCode( dec );\n\t} );\n};\n\nclass JeoMap {\n\tconstructor( element ) {\n\t\tthis.element = element;\n\t\tthis.args = element.attributes;\n\t\tthis.markers = [];\n\t\tthis.layers = [];\n\t\tthis.legends = [];\n\n\t\tconst map = new window.mapboxgl.Map( {\n\t\t\tcontainer: element,\n\t\t\tattributionControl: false,\n\t\t} );\n\t\tthis.map = map;\n\t\tthis.options = jQuery( this.element ).data( 'options' );\n\n\t\tthis.moreInfoTemplate = template( window.jeoMapVars.templates.moreInfo );\n\n\t\tthis.popupTemplate = template(\n\t\t\t`<article class=\"popup popup-wmt\">${ window.jeoMapVars.templates.postPopup }</article>`\n\t\t);\n\n\t\tthis.initMap()\n\t\t\t.then( () => {\n\t\t\t\tif ( this.getArg( 'layers' ) && this.getArg( 'layers' ).length > 0 ) {\n\t\t\t\t\tmap.setZoom( this.getArg( 'initial_zoom' ) );\n\n\t\t\t\t\tmap.setCenter( [\n\t\t\t\t\t\tthis.getArg( 'center_lon' ),\n\t\t\t\t\t\tthis.getArg( 'center_lat' ),\n\t\t\t\t\t] );\n\n\t\t\t\t\tmap.addControl(\n\t\t\t\t\t\tnew mapboxgl.NavigationControl( { showCompass: false } ),\n\t\t\t\t\t\t'top-left'\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( this.getArg( 'disable_scroll_zoom' ) ) {\n\t\t\t\t\t\tmap.scrollZoom.disable();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.getArg( 'disable_drag_pan' ) ) {\n\t\t\t\t\t\tmap.dragPan.disable();\n\t\t\t\t\t\tmap.touchZoomRotate.disable();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.getArg( 'disable_drag_rotate' ) ) {\n\t\t\t\t\t\tmap.dragRotate.disable();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.getArg( 'enable_fullscreen' ) ) {\n\t\t\t\t\t\tmap.addControl( new mapboxgl.FullscreenControl(), 'top-left' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.getArg( 'max_bounds_ne' ) &&\n\t\t\t\t\t\tthis.getArg( 'max_bounds_sw' ) &&\n\t\t\t\t\t\tthis.getArg( 'max_bounds_ne' ).length === 2 &&\n\t\t\t\t\t\tthis.getArg( 'max_bounds_sw' ).length === 2\n\t\t\t\t\t) {\n\t\t\t\t\t\tmap.setMaxBounds( [\n\t\t\t\t\t\t\tthis.getArg( 'max_bounds_sw' ),\n\t\t\t\t\t\t\tthis.getArg( 'max_bounds_ne' ),\n\t\t\t\t\t\t] );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.getArg( 'min_zoom' ) ) {\n\t\t\t\t\t\tmap.setMinZoom( this.getArg( 'min_zoom' ) );\n\t\t\t\t\t}\n\t\t\t\t\tif ( this.getArg( 'max_zoom' ) ) {\n\t\t\t\t\t\tmap.setMaxZoom( this.getArg( 'max_zoom' ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.then( () => {\n\t\t\t\t// Show a message when a map doesn't have layers\n\t\t\t\tif ( this.getArg( 'layers' ) && this.getArg( 'layers' ).length === 0 ) {\n\t\t\t\t\tthis.addMapWithoutLayersMessage();\n\t\t\t\t} else {\n\t\t\t\t\tlet amountLayers = 0;\n\t\t\t\t\tthis.getLayers().then( ( layers ) => {\n\t\t\t\t\t\tamountLayers = layers.length;\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.getArg( 'layers' ) &&\n\t\t\t\t\t\t\tthis.getArg( 'layers' ).length > 0 &&\n\t\t\t\t\t\t\tamountLayers > 0\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst baseLayer = layers[ 0 ];\n\t\t\t\t\t\t\tbaseLayer.addStyle( map );\n\n\t\t\t\t\t\t\tconst customAttribution = [];\n\n\t\t\t\t\t\t\tmap.on( 'load', () => {\n\t\t\t\t\t\t\t\tlayers.forEach( ( layer, i ) => {\n\t\t\t\t\t\t\t\t\tif ( layer.attribution ) {\n\t\t\t\t\t\t\t\t\t\tlet attributionLink = layer.attribution;\n\t\t\t\t\t\t\t\t\t\tconst attributionName = layer.attribution_name;\n\n\t\t\t\t\t\t\t\t\t\tconst regex = new RegExp(\n\t\t\t\t\t\t\t\t\t\t\t/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi\n\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tlayer.attribution &&\n\t\t\t\t\t\t\t\t\t\t\t! layer.attribution.includes( 'http' )\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tif ( layer.attribution.match( regex ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\tattributionLink = `https://${ layer.attribution }`;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tconst attributionLabel = attributionName.replace(\n\t\t\t\t\t\t\t\t\t\t\t/\\s/g,\n\t\t\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t\t).length\n\t\t\t\t\t\t\t\t\t\t\t? attributionName\n\t\t\t\t\t\t\t\t\t\t\t: attributionLink;\n\t\t\t\t\t\t\t\t\t\tcustomAttribution.push(\n\t\t\t\t\t\t\t\t\t\t\t`<a href=\"${ attributionLink }\">${ attributionLabel }</a>`\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ( i > 0 ) {\n\t\t\t\t\t\t\t\t\t\tlayer.addLayer( map );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlayer.addInteractions( map );\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tthis.addLayersControl( amountLayers );\n\n\t\t\t\t\t\t\tmap.addControl(\n\t\t\t\t\t\t\t\tnew mapboxgl.AttributionControl( {\n\t\t\t\t\t\t\t\t\tcustomAttribution,\n\t\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t\t'bottom-left'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.addMoreButtonAndLegends();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.getRelatedPosts();\n\t\t\t\t\t\t// Show a message when a map doesn't have layers\n\t\t\t\t\t\tif ( amountLayers === 0 ) {\n\t\t\t\t\t\t\tthis.addMapWithoutLayersMessage();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.then( () => {\n\t\t\t\t// Remove all empty jeo map blocks\n\t\t\t\tjQuery(\n\t\t\t\t\t'.jeomap.wp-block-jeo-map.mapboxgl-map:not([data-map_id])'\n\t\t\t\t).remove();\n\t\t\t} );\n\t\twindow.map = map;\n\t}\n\n\tinitMap() {\n\t\tif ( this.getArg( 'map_id' ) ) {\n\t\t\treturn jQuery.ajax({\n\t\t\t\ttype: 'GET',\n\t\t\t\tbeforeSend: function (request) {\n\t\t\t\t\trequest.setRequestHeader('X-WP-Nonce', jeoMapVars.nonce)\n\t\t\t\t},\n\t\t\t\turl: jeoMapVars.jsonUrl + 'map/' + this.getArg( 'map_id' )\n\t\t\t}\n\t\t\t).then( ( data ) => {\n\t\t\t\tthis.map_post_object = data;\n\t\t\t} );\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n\taddMapWithoutLayersMessage() {\n\t\tconst layers = document.createElement( 'div' );\n\t\tlayers.innerHTML +=\n\t\t\t'<p class=\"jeomap-no-layers__text\">This map doesn\\'t have layers</p>';\n\t\tthis.element.appendChild( layers );\n\t\tjQuery( this.element ).addClass( 'jeo-without-layers' );\n\t\tjQuery( this.element ).find( '.mapboxgl-control-container' ).remove();\n\t\tjQuery( this.element ).find( '.mapboxgl-canvas-container' ).remove();\n\t}\n\n\t/**\n\t * Adds the \"More\" button that will open the Content of the Map post in an overlayer\n\t *\n\t * This will only work for maps stored in the database and not for one-time use maps\n\t */\n\taddMoreButtonAndLegends() {\n\t\tconst container = document.createElement( 'div' );\n\t\tcontainer.classList.add( 'legend-container' );\n\n\t\tconst hideableContent = document.createElement( 'div' );\n\t\thideableContent.classList.add( 'hideable-content' );\n\n\t\tlet appearingLegends = 0;\n\n\t\tthis.legends.forEach( ( legend ) => {\n\t\t\tif ( ! legend.attributes.use_legend ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tappearingLegends++;\n\t\t} );\n\n\t\tif ( this.legends.length > 0 && appearingLegends > 0 ) {\n\t\t\tconst legendsTitle = document.createElement( 'div' );\n\t\t\tlegendsTitle.classList.add( 'legends-title' );\n\t\t\tlegendsTitle.innerHTML = '<span class=\"text\"> Legend </span>';\n\n\t\t\tconst legendsHideIcon = document.createElement( 'i' );\n\t\t\tlegendsHideIcon.classList.add( 'arrow-icon', 'active' );\n\n\t\t\tlegendsTitle.appendChild( legendsHideIcon );\n\t\t\tcontainer.appendChild( legendsTitle );\n\n\t\t\tlegendsHideIcon.addEventListener( 'click', () => {\n\t\t\t\tif ( legendsHideIcon.classList.contains( 'active' ) ) {\n\t\t\t\t\tlegendsHideIcon.classList.remove( 'active' );\n\t\t\t\t\tjQuery( '.hideable-content' ).slideToggle( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\tlegendsHideIcon.classList.add( 'active' );\n\t\t\t\t\tjQuery( '.hideable-content' ).slideToggle( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tconst legendsWrapper = document.createElement( 'div' );\n\t\t\tlegendsWrapper.classList.add( 'legends-wrapper' );\n\t\t\thideableContent.appendChild( legendsWrapper );\n\n\t\t\tthis.legends.forEach( ( legend ) => {\n\t\t\t\tif ( ! legend.attributes.use_legend ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst legendContainer = document.createElement( 'div' );\n\t\t\t\tlegendContainer.classList.add( 'legend-for-' + legend.layer_id );\n\t\t\t\tlegendContainer.appendChild( legend.render() );\n\t\t\t\tlegendsWrapper.appendChild( legendContainer );\n\t\t\t} );\n\t\t}\n\n\t\tconst moreDiv = document.createElement( 'div' );\n\n\t\tmoreDiv.classList.add( 'more-info-overlayer' );\n\t\tif ( this.map_post_object ) {\n\t\t\tmoreDiv.innerHTML = this.moreInfoTemplate( {\n\t\t\t\tmap: this.map_post_object,\n\t\t\t} );\n\t\t} else {\n\t\t\tlet innerHTML = '';\n\t\t\tthis.layers.forEach( ( layer ) => {\n\t\t\t\tinnerHTML += `<h3>${ layer.attributes.layer_name }</h1>`;\n\n\t\t\t\tconst regex = new RegExp(\n\t\t\t\t\t/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi\n\t\t\t\t);\n\n\t\t\t\tlet attributionLink = layer.attributes.attribution;\n\t\t\t\tconst attributionName = layer.attributes.attribution_name;\n\n\t\t\t\tlet sourceLink = layer.source_url;\n\n\t\t\t\tif (\n\t\t\t\t\tlayer.attributes.attribution &&\n\t\t\t\t\t! layer.attributes.attribution.includes( 'http' )\n\t\t\t\t) {\n\t\t\t\t\tif ( layer.attributes.attribution.match( regex ) ) {\n\t\t\t\t\t\tattributionLink = `https://${ layer.attributes.attribution }`;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( layer.source_url && ! layer.source_url.includes( 'http' ) ) {\n\t\t\t\t\tif ( layer.source_url.match( regex ) ) {\n\t\t\t\t\t\tsourceLink = `https://${ layer.source_url }`;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( attributionLink ) {\n\t\t\t\t\tinnerHTML += `<p>Attribution: <a href=\"${ attributionLink }\">${ attributionName }</a></p>`;\n\t\t\t\t}\n\t\t\t\tif ( sourceLink ) {\n\t\t\t\t\tinnerHTML += `<a\n\t\t\t\t\t\t\t\t\tstyle=\"font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;\n\t\t\t\t\t\t\t\t\tbackground: #fff;\n\t\t\t\t\t\t\t\t\tborder: 1px solid rgba(0,0,0,0.4);\n\t\t\t\t\t\t\t\t\tcolor: #404040;\n\t\t\t\t\t\t\t\t\tmargin-top: 8px;\n\t\t\t\t\t\t\t\t\tpadding: 4px 10px;\n\t\t\t\t\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\t\t\t\tborder-bottom: 1px solid rgba(0,0,0,0.25);\n\t\t\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t\t\ttransition: all .2 ease-in-out;\"\n\t\t\t\t\t\t\t\t\thref=\"${ sourceLink }\" class=\"download-source\">Download from source\n\t\t\t\t\t\t\t\t  </a>`;\n\t\t\t\t}\n\t\t\t} );\n\t\t\tmoreDiv.innerHTML = innerHTML;\n\t\t}\n\n\t\tconst closeButton = document.createElement( 'div' );\n\t\tcloseButton.classList.add( 'more-info-close' );\n\t\tcloseButton.innerHTML =\n\t\t\t'<button class=\"mapboxgl-popup-close-button\" type=\"button\" aria-label=\"Close popup\"><span>×</span></button>';\n\n\t\tcloseButton.click( function ( e ) {} );\n\n\t\tcloseButton.onclick = ( e ) => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\n\t\t\tjQuery( e.currentTarget ).parent().hide();\n\t\t};\n\n\t\tmoreDiv.appendChild( closeButton );\n\n\t\tconst moreButton = document.createElement( 'a' );\n\t\tmoreButton.classList.add( 'more-info-button' );\n\t\tmoreButton.innerHTML = 'Info';\n\n\t\tmoreButton.onclick = ( e ) => {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tjQuery( e.currentTarget )\n\t\t\t\t.parent()\n\t\t\t\t.parent()\n\t\t\t\t.siblings( '.more-info-overlayer' )\n\t\t\t\t.show();\n\t\t};\n\n\t\tthis.element.appendChild( moreDiv );\n\t\thideableContent.appendChild( moreButton );\n\n\t\tcontainer.appendChild( hideableContent );\n\t\tthis.element.appendChild( container );\n\n\t\t// hide legends from hidden layers\n\t\tthis.layers.forEach( ( l, i ) => {\n\t\t\tif ( i == 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( l.attributes.visible !== true ) {\n\t\t\t\tjQuery( this.element )\n\t\t\t\t\t.find( '.legend-for-' + l.layer_id )\n\t\t\t\t\t.hide();\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetArg( argName ) {\n\t\tlet value;\n\t\tif ( this.map_post_object ) {\n\t\t\tvalue = this.map_post_object.meta[ argName ];\n\t\t} else {\n\t\t\tvalue = jQuery( this.element ).data( argName );\n\t\t}\n\n\t\tif ( value ) {\n\t\t\treturn value;\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetLayers() {\n\t\treturn new Promise( ( resolve, reject ) => {\n\t\t\tconst layersDefinitions = this.getArg( 'layers' );\n\t\t\tthis.layersDefinitions = layersDefinitions;\n\n\t\t\tif ( layersDefinitions ) {\n\t\t\t\tconst layersIds = layersDefinitions.map( ( el ) => el.id );\n\t\t\t\tconst urlRoutes = window.location.pathname.split( '/' );\n\t\t\t\tconst lang = urlRoutes[ 1 ];\n\n\t\t\t\tjQuery.get(\n\t\t\t\t\tjeoMapVars.jsonUrl + 'map-layer',\n\t\t\t\t\t{\n\t\t\t\t\t\tinclude: layersIds,\n\t\t\t\t\t\torderby: 'include',\n\t\t\t\t\t\tlang: lang ? lang : '',\n\t\t\t\t\t},\n\t\t\t\t\t( data ) => {\n\t\t\t\t\t\tconst returnLayers = [];\n\t\t\t\t\t\tconst returnLegends = [];\n\t\t\t\t\t\tconst ordered = [];\n\t\t\t\t\t\tlayersIds.forEach( ( el, index ) => {\n\t\t\t\t\t\t\tordered[ index ] = data.find( ( l ) => l.id == el );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tordered.forEach( ( layerObject, i ) => {\n\t\t\t\t\t\t\tif ( layerObject ) {\n\t\t\t\t\t\t\t\treturnLayers.push(\n\t\t\t\t\t\t\t\t\tnew window.JeoLayer( layerObject.meta.type, {\n\t\t\t\t\t\t\t\t\t\tlayer_id: layerObject.slug,\n\t\t\t\t\t\t\t\t\t\tlayer_name: layerObject.title.rendered,\n\t\t\t\t\t\t\t\t\t\tattribution: layerObject.meta.attribution,\n\t\t\t\t\t\t\t\t\t\tattribution_name: layerObject.meta.attribution_name,\n\t\t\t\t\t\t\t\t\t\tvisible: layersDefinitions[ i ].default,\n\t\t\t\t\t\t\t\t\t\tlayer_type_options: layerObject.meta.layer_type_options,\n\t\t\t\t\t\t\t\t\t\tsource_url: layerObject.meta.source_url,\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tlayerObject.meta.legend_type !== 'none' &&\n\t\t\t\t\t\t\t\t\tlayersDefinitions[ i ].show_legend\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturnLegends.push(\n\t\t\t\t\t\t\t\t\t\tnew window.JeoLegend( layerObject.meta.legend_type, {\n\t\t\t\t\t\t\t\t\t\t\tlayer_id: layerObject.slug,\n\t\t\t\t\t\t\t\t\t\t\tlegend_type_options: layerObject.meta.legend_type_options,\n\t\t\t\t\t\t\t\t\t\t\tuse_legend: layerObject.meta.use_legend,\n\t\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tthis.layers = returnLayers;\n\t\t\t\t\t\tthis.legends = returnLegends;\n\t\t\t\t\t\tresolve( returnLayers );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t}\n\n\tgetRelatedPosts() {\n\t\treturn new Promise( ( resolve, reject ) => {\n\t\t\tconst relatedPostsCriteria = this.getArg( 'related_posts' );\n\t\t\tthis.relatedPostsCriteria = relatedPostsCriteria;\n\t\t\tconst query = {};\n\t\t\tquery.per_page = 100; // TODO handle limit of posts per query\n\t\t\tquery.orderby = 'date';\n\t\t\tquery.order = 'desc';\n\n\t\t\tconst keys = Object.keys( relatedPostsCriteria );\n\n\t\t\tfor ( const i in keys ) {\n\t\t\t\tquery[ keys[ i ] ] = relatedPostsCriteria[ keys[ i ] ];\n\t\t\t}\n\n\t\t\tif ( keys.length < 1 ) {\n\t\t\t\tresolve( [] );\n\t\t\t}\n\n\t\t\tquery._embed = 1;\n\n\t\t\tjQuery.get( jeoMapVars.jsonUrl + 'posts', query, ( data ) => {\n\t\t\t\tif ( data.length ) {\n\t\t\t\t\tdata.forEach( ( post ) => {\n\t\t\t\t\t\tthis.addPostToMap( post );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\taddPostToMap( post ) {\n\t\tif ( post.meta._related_point ) {\n\t\t\tpost.meta._related_point.forEach( ( point ) => {\n\t\t\t\tthis.addPointToMap( point, post );\n\t\t\t} );\n\t\t}\n\t}\n\n\taddPointToMap( point, post ) {\n\t\tconst color = point.relevance === 'secondary' ? '#CCCCCC' : '#3FB1CE';\n\t\tconst marker = new mapboxgl.Marker( { color } );\n\t\tmarker.getElement().classList.add( 'marker' );\n\n\t\tconst popupHTML = this.popupTemplate( {\n\t\t\tpost,\n\t\t\tread_more: window.jeoMapVars.string_read_more,\n\t\t\tshow_featured_media: false,\n\t\t} );\n\n\t\tconst popUp = new mapboxgl.Popup().setHTML( popupHTML );\n\n\t\tconst LngLat = {\n\t\t\tlat: parseFloat( point._geocode_lat ),\n\t\t\tlon: parseFloat( point._geocode_lon ),\n\t\t};\n\n\t\tmarker.setLngLat( LngLat );\n\t\tmarker.addTo( this.map );\n\t\tthis.markers.push( marker );\n\n\t\tmarker.getElement().addEventListener( 'click', () => {\n\t\t\tthis.activateMarker( marker );\n\t\t\tif (\n\t\t\t\t! this.options ||\n\t\t\t\t! this.options.marker_action === 'embed_preview'\n\t\t\t) {\n\t\t\t\tmarker.setPopup( popUp );\n\t\t\t} else {\n\t\t\t\tthis.embedPreviewActive = true;\n\t\t\t\tthis.updateEmbedPreview( post );\n\t\t\t}\n\t\t\tthis.map.flyTo( { center: LngLat } );\n\t\t} );\n\n\t\t// By default, fly to the first post and centers it\n\t\tthis.activateMarker( marker );\n\t\tthis.map.flyTo( { center: LngLat, zoom: 4 } );\n\t}\n\n\tactivateMarker( activeMarker ) {\n\t\tthis.markers.map( ( marker ) => {\n\t\t\tconst canToggle =\n\t\t\t\tmarker._lngLat.lat === activeMarker._lngLat.lat &&\n\t\t\t\tmarker._lngLat.lon === activeMarker._lngLat.lon;\n\t\t\treturn marker.getElement().classList.toggle( 'marker-active', canToggle );\n\t\t} );\n\t}\n\n\t/**\n\t * Generates the HTML and updates the story box of the Map embed URL\n\t *\n\t * @param post\n\t */\n\tupdateEmbedPreview( post ) {\n\t\tconst html = this.popupTemplate( {\n\t\t\tpost,\n\t\t\tread_more: window.jeoMapVars.string_read_more,\n\t\t\tshow_featured_media: true,\n\t\t} );\n\n\t\tjQuery( '#embed-post-preview' ).html( html );\n\t}\n\n\t/**\n\t * return an array with the index of the layers in the\n\t * this.layers list that are marked as toggable.\n\t *\n\t * If there are no toggable layers, returns an empty array\n\t *\n\t * @return array\n\t */\n\tgetSwitchableLayers() {\n\t\tconst layers = [];\n\t\tthis.layersDefinitions.forEach( ( el, index ) => {\n\t\t\tif ( el.use === 'switchable' ) {\n\t\t\t\tlayers.push( index );\n\t\t\t}\n\t\t} );\n\t\treturn layers;\n\t}\n\n\t/**\n\t * return an array with the index of the layers in the\n\t * this.layers list that are marked as switchable.\n\t *\n\t * If there are no switchable layers, returns an empty array\n\t *\n\t * @return array\n\t */\n\tgetSwappableLayers() {\n\t\tconst layers = [];\n\t\tthis.layersDefinitions.forEach( ( el, index ) => {\n\t\t\tif ( el.use === 'swappable' ) {\n\t\t\t\tlayers.push( index );\n\t\t\t}\n\t\t} );\n\t\treturn layers;\n\t}\n\n\t/**\n\t * return the index of the switchable layer marked as default\n\t */\n\tgetDefaultSwappableLayer() {\n\t\tconst layers = [];\n\t\tthis.layersDefinitions.forEach( ( el, index ) => {\n\t\t\tif ( el.use === 'swappable' && el.default ) {\n\t\t\t\tlayers.push( index );\n\t\t\t}\n\t\t} );\n\t\treturn layers;\n\t}\n\n\t/*\n\t\tamountLayers = new parameter\n\t*/\n\taddLayersControl( amountLayers ) {\n\t\tconst switchableLayers = this.getSwitchableLayers();\n\t\tconst swappableLayers = this.getSwappableLayers();\n\n\t\tconst navElement = document.createElement( 'nav' );\n\t\tnavElement.classList.add( 'layers-selection' );\n\n\t\tif (\n\t\t\tswitchableLayers.length + swappableLayers.length !== 0 &&\n\t\t\tamountLayers > 1\n\t\t) {\n\t\t\tconst layerSelectionTitle = document.createElement( 'div' );\n\t\t\tlayerSelectionTitle.classList.add( 'layer-selection-title' );\n\n\t\t\tconst legendsTitle = document.createElement( 'div' );\n\t\t\tlegendsTitle.classList.add( 'legends-title' );\n\n\t\t\tconst legendTextIcon = document.createElement( 'div' );\n\t\t\tlegendTextIcon.classList.add( 'text-icon' );\n\n\t\t\tconst layerIcon = document.createElement( 'i' );\n\t\t\tlayerIcon.classList.add( 'layer-icon' );\n\n\t\t\tlegendTextIcon.appendChild( layerIcon );\n\t\t\tlegendTextIcon.innerHTML += '<span class=\"text\"> Layers </span>';\n\n\t\t\tlegendsTitle.appendChild( legendTextIcon );\n\n\t\t\tconst legendsHideIcon = document.createElement( 'i' );\n\t\t\tlegendsHideIcon.classList.add( 'arrow-icon', 'active' );\n\n\t\t\tlegendsTitle.appendChild( legendsHideIcon );\n\t\t\tlayerSelectionTitle.appendChild( legendsTitle );\n\n\t\t\tlegendsHideIcon.addEventListener( 'click', () => {\n\t\t\t\tif ( legendsHideIcon.classList.contains( 'active' ) ) {\n\t\t\t\t\tlegendsHideIcon.classList.remove( 'active' );\n\t\t\t\t\tjQuery( '.layers-wrapper' ).slideToggle( 'slow' );\n\t\t\t\t} else {\n\t\t\t\t\tlegendsHideIcon.classList.add( 'active' );\n\t\t\t\t\tjQuery( '.layers-wrapper' ).slideToggle( 'slow' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tnavElement.appendChild( layerSelectionTitle );\n\t\t}\n\n\t\tconst layers = document.createElement( 'div' );\n\t\tlayers.classList.add( 'layers-wrapper' );\n\n\t\tswitchableLayers.forEach( ( index ) => {\n\t\t\tif ( this.layers[ index ] ) {\n\t\t\t\tconst link = document.createElement( 'a' );\n\t\t\t\tlink.href = '#';\n\t\t\t\tif ( this.layersDefinitions[ index ].default ) {\n\t\t\t\t\tlink.className = 'active';\n\t\t\t\t}\n\n\t\t\t\tconst layerName = document.createElement( 'span' );\n\t\t\t\tlayerName.classList.add( 'layer-name' );\n\t\t\t\tlayerName.textContent = decodeHtmlEntity(\n\t\t\t\t\tthis.layers[ index ].layer_name\n\t\t\t\t);\n\n\t\t\t\tlink.setAttribute( 'data-layer_id', this.layers[ index ].layer_id );\n\n\t\t\t\tlink.onclick = ( e ) => {\n\t\t\t\t\tconst clicked = e.currentTarget;\n\t\t\t\t\tconst clickedLayer = clicked.dataset.layer_id;\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\tconst visibility = this.map.getLayoutProperty(\n\t\t\t\t\t\tclickedLayer,\n\t\t\t\t\t\t'visibility'\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( typeof visibility === 'undefined' || visibility === 'visible' ) {\n\t\t\t\t\t\tthis.hideLayer( clickedLayer );\n\t\t\t\t\t\tclicked.className = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclicked.className = 'active';\n\t\t\t\t\t\tthis.showLayer( clickedLayer );\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tlink.appendChild( layerName );\n\n\t\t\t\tlayers.appendChild( link );\n\t\t\t}\n\t\t} );\n\n\t\tnavElement.appendChild( layers );\n\n\t\tswappableLayers.forEach( ( index ) => {\n\t\t\tif ( this.layers[ index ] ) {\n\t\t\t\tconst link = document.createElement( 'a' );\n\t\t\t\tlink.href = '#';\n\t\t\t\tlink.classList.add( 'swappable' );\n\n\t\t\t\tif ( this.getDefaultSwappableLayer() == index ) {\n\t\t\t\t\tlink.classList.add( 'active' );\n\t\t\t\t}\n\t\t\t\tlink.textContent = decodeHtmlEntity( this.layers[ index ].layer_name );\n\t\t\t\tlink.setAttribute( 'data-layer_id', this.layers[ index ].layer_id );\n\n\t\t\t\tlink.onclick = ( e ) => {\n\t\t\t\t\tif ( jQuery( e.currentTarget ).hasClass( 'active' ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t// hide all\n\t\t\t\t\tthis.getSwappableLayers().forEach( ( i ) => {\n\t\t\t\t\t\tthis.hideLayer( this.layers[ i ].layer_id );\n\t\t\t\t\t} );\n\t\t\t\t\tjQuery( layers ).children( '.swappable' ).removeClass( 'active' );\n\n\t\t\t\t\t// display current\n\t\t\t\t\tconst clicked = e.currentTarget;\n\t\t\t\t\tconst clickedLayer = clicked.dataset.layer_id;\n\t\t\t\t\tthis.showLayer( clickedLayer );\n\n\t\t\t\t\tclicked.classList.add( 'active' );\n\t\t\t\t};\n\n\t\t\t\tlayers.appendChild( link );\n\t\t\t}\n\t\t} );\n\n\t\tnavElement.appendChild( layers );\n\n\t\tthis.element.appendChild( navElement );\n\t}\n\n\tchangeLayerVisibitly( layer_id, visibility ) {\n\t\tthis.map.getStyle().layers.forEach( ( layer ) => {\n\t\t\tif ( layer.id == layer_id ) {\n\t\t\t\tthis.map.setLayoutProperty( layer.id, 'visibility', visibility );\n\t\t\t}\n\t\t} );\n\t}\n\n\tshowLayer( layer_id ) {\n\t\tthis.changeLayerVisibitly( layer_id, 'visible' );\n\t\tjQuery( this.element )\n\t\t\t.find( '.legend-for-' + layer_id )\n\t\t\t.show();\n\t}\n\n\thideLayer( layer_id ) {\n\t\tthis.changeLayerVisibitly( layer_id, 'none' );\n\t\tjQuery( this.element )\n\t\t\t.find( '.legend-for-' + layer_id )\n\t\t\t.hide();\n\t}\n}\n\n( function ( $ ) {\n\t$( function () {\n\t\t$( '.jeomap' ).each( function ( i ) {\n\t\t\t/* \n\t\t\t\tbefore pass this element to JeoMap constructor\n\t\t\t\twe need to get the bypassed wp unfiltered_html permission\n\t\t\t\tgetting map_id as a class and creating it as an data element\n\t\t\t\tcheck /src/js/src/map-blocks/map-display.js\n\t\t\t*/\n\t\t\tlet map_id;\n\t\t\tthis.classList.forEach( ( cls ) => {\n\t\t\t\tif ( cls.indexOf( 'map_id_' ) === 0 ) {\n\t\t\t\t\tmap_id = cls.substr( 7 );\n\t\t\t\t}\n\t\t\t} );\n\t\t\t// creating data-map_id if class exists\n\t\t\t// otherwise this is a onetime map\n\t\t\t// check initMap() method at this file\n\t\t\tif ( map_id ) {\n\t\t\t\tthis.dataset['map_id'] = map_id;\n\t\t\t}\n\t\t\tnew JeoMap( this );\n\t\t} );\n\t} );\n} )( jQuery );\n"],"sourceRoot":""}